<html>
    <body>
        <div id="failure"><h1>Failed to log in.</h1></div>
        <div id="loginform">
            <form id="login" onsubmit="validate();" method="post">
                <h4>Log In</h4>
                <table style="text-align: left;">
                    <tr><th>Username:</th><td><input type="text" id="username" name="username" size="16" required></td></tr>
                    <tr><th>Password:</th><td><input type="password" id="pword" name="pwd" size="16" required></td></tr>
                </table>
                <input name="submit" type="submit" value="Log In">
            </form>
        </div>
    </body>
</html>

<style>
#failure{
  visibility:hidden;
  border-radius:20px;
  padding:2px;
  padding-left:10px;
  background: brown;
}

#login{
  border-radius:20px;
  padding:2px;
  padding-left:10px;
  background: steelblue;
}

input{
  background: silver;
}

body {
  font-family: Helvetica, Verdana, sans-serif;
  background: lightslategray;
}

</style>


<script>
function validate(){
        let uname=document.getElementById("username").value;
        let pword=document.getElementById("pword").value;
        if isalnum(pword){
                var formdata=new FormData();
		formdata.append("uname",uname);
		formdata.append("pword",hash(pword));
		let f=fetch("login.php",{method:"POST",body:formdata}).then(response=>response.json()).then(data=>{
			for (const q of data){
				if (q.status=="fail"){
					document.getElementById("failure").style.visibility="visible";
				}
			}
		});
        }
}

function isalnum(str){
        var c, i;

        for (i=0;i<str.length;i<len;i++){
                c=str.charCodeAt(i);
                if (!(c>47&&c<58)&&!(c>64&&c<91)&&!(c>96&&c<123)){
                        return false;
                }
        }
        return true;
}

</script>
